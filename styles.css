:root{
  --bg:#0a0f1f; --card:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
  --accent:#38bdf8; --ok:#10b981; --warn:#f59e0b; --danger:#ef4444; --border:#1e293b;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial}
.topbar{position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:#0b1226;border-bottom:1px solid var(--border)}
h1{margin:0;font-size:18px;letter-spacing:.3px}
.ver{color:#7dd3fc;font-weight:600;margin-left:6px;font-size:12px}
.actions{display:flex;gap:8px;flex-wrap:wrap}
button{background:#1f2937;color:var(--text);border:1px solid var(--border);border-radius:10px;padding:8px 10px;cursor:pointer}
button:hover{background:#233248}
.wrap{display:grid;grid-template-columns:1fr;gap:12px;padding:12px;max-width:980px;margin:0 auto}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px}
.period-name{font-size:22px;font-weight:600;color:#cbd5e1}
.big-count{font-size: clamp(56px, 16vw, 180px);font-weight:800;line-height:1;margin:8px 0}
.subline{color:var(--muted)}
.focus-meta{display:none; gap:16px; margin-top:6px; color:#cbd5e1}
.row{display:flex;gap:8px;align-items:center;margin:6px 0}
.row.small{margin-top:-2px}
.label{width:60px;color:var(--muted)}
.list{display:grid;gap:6px}
.block{display:flex;flex-direction:column;gap:6px;padding:10px;border-radius:12px;border:1px solid var(--border);background:#0c152c;position:relative}
.block .top{display:flex;justify-content:space-between;align-items:center}
.block .name{font-weight:700}
.block .time{color:var(--muted);font-size:13px}
.block .eta{font-size:12px}
.block.ok{border-color:#144f3e;background:#0b2a22}
.block.warn{border-color:#5a4314;background:#2a1e0b}
.block.danger{border-color:#5b1c1c;background:#2a1212}
.badge{margin-left:8px; padding:2px 6px; font-size:11px; border:1px solid var(--border); border-radius:8px; background:#18203a; color:#cbd5e1}
.badge.lunch{border-color:#2d5b3d; background:#12301f; color:#d7ffe0}
.badge.color{border-color:transparent}
.progress{height:6px;background:#0b1a33;border-radius:999px;overflow:hidden;border:1px solid var(--border);}
.progress .bar{height:100%;background:linear-gradient(90deg,#22d3ee,#10b981);width:0%}
.muted{color:var(--muted);font-size:12px}
.tiny{font-size:11px}
.check{display:flex;gap:8px;align-items:center}
.tabs{display:flex;gap:6px;margin-bottom:6px}
.tab{background:#152038}
.tab-active{background:var(--accent);border-color:transparent}
.grid{display:grid;grid-template-columns:1fr 90px 90px auto;gap:6px;align-items:center}
.input{padding:6px 8px;border-radius:8px;border:1px solid var(--border);background:#0b152f;color:#fff}
.menu{display:flex;gap:8px}
.labels-grid{display:grid;grid-template-columns: 1fr 130px 120px; gap:8px; align-items:center}
.color-swatch{width:24px;height:24px;border-radius:6px;border:1px solid var(--border);display:inline-block;vertical-align:middle;margin-left:6px}

.set-tabs{display:flex;gap:6px;margin-bottom:8px}
.set-tab{background:#152038}
.set-active{background:#38bdf8}

#intro{position:fixed;inset:0;background:rgba(10,15,31,.95);display:flex;align-items:center;justify-content:center;z-index:100}
#intro.hidden{display:none}
.intro-card{background:#0f172a;border:1px solid var(--border);border-radius:16px;padding:20px;max-width:420px;width:92vw;text-align:center}
.intro-choices{display:flex;gap:10px;justify-content:center;margin-top:10px}
.intro-choice{font-size:18px;padding:10px 16px;border-radius:12px}

body.focus .wrap{grid-template-columns:1fr}
body.focus .next, body.focus .today, body.focus .topbar .actions #btnSettings, body.focus .topbar .actions #btnICS, body.focus .topbar .actions #btnWidget, body.focus .topbar .actions #btnPopout{display:none}
body.focus .big-count{font-size: clamp(100px, 22vw, 260px)}
body.focus .period-name{font-size: clamp(28px, 5vw, 44px)}
body.focus .focus-meta{display:flex}
body.focus .progress{height:10px}

.widget{position:fixed;top:12px;right:12px;z-index:99;background:#0f172a;border:1px solid var(--border);border-radius:14px;padding:10px 12px;width:220px;box-shadow:0 10px 30px rgba(0,0,0,.3);}
.widget.hidden{display:none}
.w-title{font-weight:700;font-size:13px;color:#cbd5e1;margin-bottom:4px}
.w-count{font-size:38px;font-weight:800;line-height:1}
.w-sub{color:#9fb0c4;font-size:12px}
.w-close{position:absolute;top:4px;right:6px;border:none;background:transparent;color:#9fb0c4;font-size:16px;cursor:pointer}

details.notes{margin-top:6px}
details.notes summary{cursor:pointer;color:#9fb0c4}
details.notes textarea, details.notes input{width:100%;box-sizing:border-box;background:#0b152f;color:#e5e7eb;border:1px solid var(--border);border-radius:8px;padding:6px 8px;margin-top:6px}
details.notes .row{display:flex;gap:6px}
details.notes .row input{flex:1}